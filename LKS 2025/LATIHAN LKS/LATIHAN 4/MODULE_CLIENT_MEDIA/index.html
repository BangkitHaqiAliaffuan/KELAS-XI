<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      * {
        font-family: sans-serif;
        margin: 0;
        padding: 0;
      }

      body {
        display: flex;
        height: 100vh;
        width: 100%;
        justify-content: center;
        align-items: center;
        background-color: brown;
      }

      .inputs {
        display: flex;
        gap: 2px;
        flex-direction: column;
      }

      .inputs select,
      .inputs input {
        background-color: rgb(122, 30, 30);
        padding: 15px;
        border-radius: 10px;
        border: 2px solid rgb(42, 11, 11);
        color: white;
      }

      .inputs input::placeholder {
        color: white;
      }

      .welcome {

        width: 1000px;
        height: 600px;
        justify-content: center;
        align-items: center;
        /* flex-direction: column; */
        gap: 20px;
      }

      .container-ins{
        width: 60%;
        background-color: rgb(65, 15, 15);
        padding: 30px;
        color: white;
        height: 100%;
      }

      .container-ins .title{
        display: flex;
        align-items: center;
        justify-content: space-between;
        font-size: 30px;
      }

      .list{
        margin-top: 30px;
        padding-left: 25px;
      }

      .list li{
        margin-top: 20px;
      }

      .container-ins img{
        width: 40px;
      }

      
      form{
        width: 40%;
        gap: 20px;
        flex-direction: column;
        display: flex;
      }

      .buttons {
        display: flex;
        gap: 20px;
      }

      .buttons button,
      .buttons div {
        gap: 10px;
        width: 200px;
        font-size: larger;
        border: none;
        height: 70px;
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .buttons img {
        width: 40px;
      }

      .green {
        color: white;
        background-color: green;
      }

      .yellow {
        background-color: yellow;
      }

      .flex {
        display: flex;
      }
      .hidden {
        display: none;
      }

      #gameBoard {
        width: 1000px;
        height: 600px;
      }

      canvas {
        position: relative;
        z-index: 1;
        width: 80%;
        background-size: cover;
        background-image: url("./Sprites/General/Background.jpg");
      }

      .side {
        width: 20%;
        padding: 20px;
        color: white;
      }

      .title-side {
        font-size: 25px;
        text-align: center;
      }

      .select-side {
        margin-top: 10px;
        margin-bottom: 10px;
        width: 100%;
        height: 40px;
        border-radius: 10px;
        padding: 5px;
      }

      .name {
        display: flex;
        flex-direction: column;
      }

      .player {
        margin-top: 20px;
        display: flex;
        justify-content: space-between;
      }

      .btn-detail {
        width: 80px;
        border-radius: 5px;
        background-color: yellow;
        border: none;
      }

      .top-sprite {
        position: absolute;
        z-index: 999;
      }

      .shovel {
        position: relative;
        left: 650px;
        top: -70px;
      }

      .shovel img {
        width: 40px;
      }

      .seeds {
        position: relative;
        left: 200px;
        top: 18px;
      }

      .sun-count {
        position: relative;
        left: 136px;
      }

      .user {
        display: flex;
        flex-direction: column;
        color: white;
        position: relative;
        left: 450px;
        top: -120px;
      }

      .field-sprite img {
        width: 80px;
      }

      .peas img {
        width: 30px;
      }

      .field-sprite {
        position: absolute;
        z-index: 999;
      }

      .shooters {
        position: relative;
        top: 380px;
        display: flex;
        gap: 1px;
        left: 100px;
        flex-direction: column;
      }

      .sunflower {
        position: relative;
        left: 100px;
        top: -50px;
      }

      .wallnut {
        position: relative;
        left: 585px;
        top: 40px;
      }

      .peas {
        display: flex;
        flex-direction: column;
        gap: 50px;
        top: 38px;

        position: relative;
        left: 500px;
      }

      .zombies {
        display: flex;
        justify-content: center;
        flex-direction: column;
        position: relative;
        top: -620px;
        left: 500px;
      }

      #gamePaused,
      #gameOver {
        padding: 10px;
        align-items: center;
        gap: 20px;
        flex-direction: column;
        background-color: gray;
        width: 500px;
        height: 200px;
        color: white;
      }

      .title-over {
        font-size: 30px;
        font-weight: bold;
      }

      .btn-over {
        color: red;
        border: 2px solid red;
      }

      #countdown {
        color: white;
        font-size: 150px;
        justify-content: center;
        align-items: center;
        background-color: red;
        width: 100%;
        height: 100vh;
      }

      .sun {
        left: 200px;
        position: relative;
      }

      .sun img {
        width: 40px;
      }

      .lawnmower {
        display: flex;
        flex-direction: column;
        position: relative;
        gap: 10px;
        top: -400px;
      }

      .line {
        width: 100%;
        height: 1px;
        background-color: white;
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    <div id="welcome" class="welcome flex">
      <form class="" onsubmit="handleSubmit()" action="">
        <div class="title">
          <img src="./Sprites/General/logo.png" alt="" />
        </div>

        <div class="inputs">
          <input placeholder="Input Username" id="username" type="text" />
          <select name="" id="level">
            <option value="">Select level</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
          </select>
        </div>

        <div class="buttons">
          <button class="green">
            <img src="./Sprites/General/Shovel.png" alt="" />
            Play Game
          </button>
          <div onclick="handleNavigate('instruction')" class="yellow">Instruction</div>
        </div>
      </form>

      <div id="instruction" class="container-ins">
        <div class="title">
        How To Play Game
        <span><img src="./Sprites/General/close-icon.png" alt=""></span>
        </div>
        <div class="list">
          <ol>
            <li>Input Username</li>
            <li>Take the sun to choose the plant card</li>
            <li>Put a plant cards into the field to fight zombies</li>
            <li>Don't let zombies pass through the yard</li>
            <li>Enjoy</li>
          </ol>
        </div>
      </div>

    </div>
    <div id="gameBoard" class="gameboard hidden">
      <div class="top-sprite">
        <div class="seeds">
          <img src="./Sprites/Seeds/IcePeaSeed.png" alt="" />
          <img src="./Sprites/Seeds/PeaShooterSeed.png" alt="" />
          <img src="./Sprites/Seeds/WallNutSeed.png" alt="" />
          <img src="./Sprites/Seeds/SunFlowerSeed.png" alt="" />
        </div>

        <div class="sun-count">50</div>

        <div class="shovel">
          <img src="./Sprites/General/Shovel.png" alt="" />
        </div>

        <div class="user">
          <span>Player Name</span>
          <span>Score:</span>
          <span id="time">Time:</span>
        </div>
      </div>

      <div class="field-sprite">
        <div class="shooters">
          <img src="./Sprites/PeaShooter/frame_00_delay-0.12s.gif" alt="" />
          <img src="./Sprites/IcePea/frame_02_delay-0.12s.gif" alt="" />
        </div>

        <div class="wallnut">
          <img src="./Sprites/WallNut/frame_00_delay-0.12s.gif" alt="" />
        </div>

        <div class="sunflower">
          <img src="./Sprites/SunFlower/frame_00_delay-0.06s.gif" alt="" />
        </div>
        <div class="peas">
          <img src="./Sprites/General/Pea.png" alt="" />
          <img src="./Sprites/General/IcePea.png" alt="" />
        </div>

        <div class="sun">
          <img src="./Sprites/General/Sun.png" alt="" />
        </div>

        <div class="lawnmower">
          <img src="./Sprites/General/lawnmowerIdle.gif" alt="" />
          <img src="./Sprites/General/lawnmowerIdle.gif" alt="" />
          <img src="./Sprites/General/lawnmowerIdle.gif" alt="" />
          <img src="./Sprites/General/lawnmowerIdle.gif" alt="" />
          <img src="./Sprites/General/lawnmowerIdle.gif" alt="" />
        </div>

        <div class="zombies">
          <img src="./Sprites/Zombie/frame_00_delay-0.05s.gif" alt="" />
          <img src="./Sprites/Zombie/frame_05_delay-0.05s.gif" alt="" />
        </div>
      </div>

      <canvas id="canvas"></canvas>

      <div class="side">
        <div class="title-side">LEADERBOARD</div>
        <select class="select-side" name="" id="">
          <option value="">Sort by Score</option>
        </select>

        <div class="player">
          <div class="name">
            Thomas Galih
            <span>Score: 44</span>
          </div>

          <button class="btn-detail">Detail</button>
        </div>
        <div class="line"></div>
      </div>
    </div>

    <div id="countdown" class="hidden">3</div>

    <div id="gamePaused" class="hidden">
      <div class="title-over">Game Paused</div>
      <div style="font-size: larger">Player Name</div>
      <div class="buttons">
        <button class="btn-over">Countino</button>
        <button class="btn-over">Restart</button>
      </div>
    </div>
    <div id="gameOver" class="hidden">
      <div class="title-over">Game Over</div>
      <div style="font-size: larger">Player Name</div>
      <div class="buttons">
        <button class="btn-over">Countino</button>
        <button class="btn-over">Restart</button>
      </div>
    </div>

    <script>
      const username = document.getElementById("username");
      const select = document.getElementById("level");
      const countdown = document.getElementById("countdown");
      const canvas = document.getElementById("canvas");
      const time = document.getElementById("time");

      let user = "";
      let level = "";
      function handleSubmit() {
        event.preventDefault();
        user = username.value;
        level = select.value;
        console.log(user, level);
        startCountdown();
        handleNavigate("countdown", "welcome");
      }

      document.addEventListener('Keydown', function(event){
        if(event.key = 'Escape'){
          handleNavigate('gamePaused', 'gameBoard')
        }
      })

      function handleNavigate(dom, dom2) {
        const e = document.getElementById(dom);
        if (dom2) {
          const e2 = document.getElementById(dom2);
          e2.classList.toggle("hidden");
          e2.classList.toggle("flex");
        }
        e.classList.toggle("hidden");
        e.classList.toggle("flex");
      }

      

      function startCountdown() {
        let sec = 3;
        let timer = setInterval(() => {
          sec--;
          countdown.textContent = `${sec}`;
          if (sec < 0) {
            clearInterval(timer);
            handleNavigate("gameBoard", "countdown");
            startTimer();
          }
        },1000);
      }

      // function spawnSun() {
      //   const img = document.createElement("img");
      //   img.src = "./Sprites/General/Sun.png";
      //   img.width = 40;
      //   // const maxX = canvas.wi
      // }

      function startTimer() {
        let seconds = 180;
        let timer = setInterval(() => {
          seconds--;
          const min = Math.floor(seconds / 60) ;
          const sec = seconds % 60;
         time.innerText = `${String(min).padStart(2,0)}:${String(sec).padStart(2,0)}  `
        }, 1000);
      }
    </script>
  </body>
</html>
